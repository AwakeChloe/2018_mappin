webpackJsonp([3],{MSKy:function(e,a){},"eE+6":function(e,a){},fqTJ:function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=s("Xxa5"),r=s.n(t),n=s("exGp"),o=s.n(n),i=s("P9l9"),c=s("Za1Y"),l={name:"loginChange",components:{alertTip:c.a},data:function(){return{emailAddress:"",hasAlert:!1,alertText:""}},methods:{closeAlert:function(){this.hasAlert=!1},cancelChange:function(){this.$emit("cancelChange")},resetPassword:function(){var e=this;return o()(r.a.mark(function a(){var s,t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={email:e.emailAddress},a.next=3,i.a.resetPassword(s);case 3:(t=a.sent).tip?(e.hasAlert=!0,e.alertText=t.tip):"OK"!==t.response.message&&(e.alertText=t.response.message,e.hasAlert=!0);case 5:case"end":return a.stop()}},a,e)}))()}}},u={render:function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"fullScream"},[s("div",{staticClass:"model"},[s("label",{attrs:{for:"email"}},[e._v("邮箱:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.emailAddress,expression:"emailAddress"}],attrs:{name:"email",id:"email",type:"text"},domProps:{value:e.emailAddress},on:{input:function(a){a.target.composing||(e.emailAddress=a.target.value)}}}),e._v(" "),s("button",{on:{click:e.resetPassword}},[e._v("确认")]),e._v(" "),s("button",{on:{click:e.cancelChange}},[e._v("取消")])]),e._v(" "),s("alertTip",{directives:[{name:"show",rawName:"v-show",value:e.hasAlert,expression:"hasAlert"}],attrs:{"alert-text":e.alertText},on:{closeAlert:e.closeAlert}})],1)},staticRenderFns:[]};var d={name:"app",components:{LoginChange:s("VU/8")(l,u,!1,function(e){s("MSKy")},"data-v-42a7279d",null).exports,Alert:c.a},data:function(){return{isRegister:!1,password:"",username:"",captchaCode:"",captchaCodeImg:"",hasAlert:!1,alertText:"",userInfo:"",hasChange:!1,emailHasChange:!1}},created:function(){this.getCaptchaCode(),this.login()},methods:{closeAlert:function(){this.hasAlert=!1},cancelChange:function(){this.hasChange=!1},resetPassword:function(){this.hasChange=!0},loginOrRegister:function(){this.isRegister=!this.isRegister},getCaptchaCode:function(){var e=this;return o()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.getCaptchaCode();case 2:s=a.sent,e.captchaCodeImg=s.code;case 4:case"end":return a.stop()}},a,e)}))()},accountLogin:function(){var e=this;return o()(r.a.mark(function a(){var s,t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={username:e.username,password:e.password},a.next=3,i.a.accountLogin(s);case 3:(t=a.sent).tip?(e.hasAlert=!0,e.alertText=t.tip):"OK"!==t.response.message?(e.alertText=t.response.message,e.hasAlert=!0):"OK"===t.response.message&&(localStorage.setItem("token",t.token),e.$router.push({name:"makePoint"}));case 5:case"end":return a.stop()}},a,e)}))()},accountRegister:function(){var e=this;return o()(r.a.mark(function a(){var s,t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={captcha_code:e.captchaCode,username:e.username,password:e.password},a.next=3,i.a.CaptchaCode(s);case 3:if(e.userInfo=a.sent,"验证码不正确"!==e.userInfo.response.message){a.next=9;break}e.alertText=e.userInfo.response.message,e.hasAlert=!0,a.next=14;break;case 9:if("验证码不正确"===e.userInfo.response.message){a.next=14;break}return a.next=12,i.a.accountRegister(s);case 12:(t=a.sent).tip?(e.hasAlert=!0,e.alertText=t.tip):"OK"!==t.response.message&&(e.alertText=t.response.message,e.hasAlert=!0);case 14:case"end":return a.stop()}},a,e)}))()}}},p={render:function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{attrs:{id:"app"}},[s("fieldset",[s("div",[s("label",{attrs:{for:"userName"}},[e._v("username:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{name:"userName",id:"userName",type:"text"},domProps:{value:e.username},on:{input:function(a){a.target.composing||(e.username=a.target.value)}}})]),e._v(" "),s("div",[s("label",{attrs:{for:"password"}},[e._v("password:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{name:"password",id:"password",type:"password"},domProps:{value:e.password},on:{input:function(a){a.target.composing||(e.password=a.target.value)}}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isRegister,expression:"isRegister"}]},[s("label",{attrs:{for:"captchaCode"}},[e._v("验证码:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.captchaCode,expression:"captchaCode"}],attrs:{name:"password",id:"captchaCode",type:"text"},domProps:{value:e.captchaCode},on:{input:function(a){a.target.composing||(e.captchaCode=a.target.value)}}})])]),e._v(" "),s("div",{on:{click:e.loginOrRegister}},[e._v(e._s(e.isRegister?"去登录":"去注册"))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isRegister,expression:"isRegister"}]},[s("img",{attrs:{src:this.captchaCodeImg,alt:"img is wrong"},on:{click:e.getCaptchaCode}}),e._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:!0===e.isRegister,expression:"isRegister === true"}],on:{click:e.accountRegister}},[e._v("注册")])]),e._v(" "),s("div",[s("button",{directives:[{name:"show",rawName:"v-show",value:!1===e.isRegister,expression:"isRegister === false"}],on:{click:e.accountLogin}},[e._v("登录")]),e._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:!1===e.isRegister,expression:"isRegister === false"}],on:{click:e.resetPassword}},[e._v("重置密码")])]),e._v(" "),s("alert",{directives:[{name:"show",rawName:"v-show",value:e.hasAlert,expression:"hasAlert"}],attrs:{"alert-text":e.alertText},on:{closeAlert:e.closeAlert}}),e._v(" "),s("login-change",{directives:[{name:"show",rawName:"v-show",value:e.hasChange,expression:"hasChange"}],on:{cancelChange:e.cancelChange}}),e._v(" "),s("router-view")],1)},staticRenderFns:[]};var m=s("VU/8")(d,p,!1,function(e){s("eE+6")},"data-v-319947d4",null);a.default=m.exports}});
//# sourceMappingURL=3.f39df65b14ef8b11aea9.js.map