webpackJsonp([5],{MSKy:function(e,t){},fqTJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),n=a("exGp"),i=a.n(n),o=a("Dd8w"),c=a.n(o),l=a("P9l9"),d=a("Za1Y"),u={name:"loginChange",components:{alertTip:d.a},data:function(){return{emailAddress:"",hasAlert:!1,alertText:""}},methods:{closeAlert:function(){this.hasAlert=!1},cancelChange:function(){this.$emit("cancelChange")},resetPassword:function(){var e=this;return i()(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={email:e.emailAddress},t.next=3,l.a.resetPassword(a);case 3:(s=t.sent).tip?(e.hasAlert=!0,e.alertText=s.tip):"OK"!==s.response.message&&(e.alertText=s.response.message,e.hasAlert=!0);case 5:case"end":return t.stop()}},t,e)}))()}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fullScream"},[a("div",{staticClass:"model"},[a("label",{attrs:{for:"email"}},[e._v("邮箱:")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.emailAddress,expression:"emailAddress"}],attrs:{name:"email",id:"email",type:"text"},domProps:{value:e.emailAddress},on:{input:function(t){t.target.composing||(e.emailAddress=t.target.value)}}}),e._v(" "),a("button",{on:{click:e.resetPassword}},[e._v("确认")]),e._v(" "),a("button",{on:{click:e.cancelChange}},[e._v("取消")])]),e._v(" "),a("alertTip",{directives:[{name:"show",rawName:"v-show",value:e.hasAlert,expression:"hasAlert"}],attrs:{"alert-text":e.alertText},on:{closeAlert:e.closeAlert}})],1)},staticRenderFns:[]};var p=a("VU/8")(u,m,!1,function(e){a("MSKy")},"data-v-42a7279d",null).exports,v=a("2bvH"),h={name:"app",components:{LoginChange:p,Alert:d.a},data:function(){return{isRegister:!1,password:"",username:"",captchaCode:"",captchaCodeImg:"",hasAlert:!1,alertText:"",userInfo:"",hasChange:!1,emailHasChange:!1,ResisterEmail:""}},created:function(){this.getCaptchaCode()},methods:c()({},Object(v.b)(["login"]),{closeAlert:function(){this.hasAlert=!1},cancelChange:function(){this.hasChange=!1},resetPassword:function(){this.hasChange=!0},loginOrRegister:function(){this.isRegister=!this.isRegister},getCaptchaCode:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.getCaptchaCode();case 2:a=t.sent,e.captchaCodeImg=a.code;case 4:case"end":return t.stop()}},t,e)}))()},accountLogin:function(){var e=this;return i()(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={username:e.username,password:e.password},t.next=3,l.a.accountLogin(a);case 3:(s=t.sent).tip?(e.hasAlert=!0,e.alertText=s.tip):1!==s.status?(e.alertText=s.message,e.hasAlert=!0):1===s.status&&(localStorage.setItem("token",s.token),e.login(),e.$router.push({name:"makePoint"}));case 5:case"end":return t.stop()}},t,e)}))()},accountRegister:function(){var e=this;return i()(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.getCaptchaCode(),a={captcha_code:e.captchaCode,username:e.username,password:e.password,email:e.ResisterEmail},t.next=4,l.a.CaptchaCode(a);case 4:if(e.userInfo=t.sent,"验证码不正确"!==e.userInfo.message){t.next=10;break}e.alertText=e.userInfo.message,e.hasAlert=!0,t.next=14;break;case 10:return t.next=12,l.a.accountRegister(a);case 12:(s=t.sent).tip?(e.hasAlert=!0,e.alertText=s.tip):"1"!==s.status&&(e.alertText=s.message,e.hasAlert=!0);case 14:case"end":return t.stop()}},t,e)}))()}})},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"loginHead"}),e._v(" "),a("div",{staticClass:"loginCenter",attrs:{align:"center"}},[a("h2",[e._v("Mappin")]),e._v(" "),a("div",[a("label",{attrs:{for:"userName"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{placeholder:"用户名",name:"userName",id:"userName",type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),a("div",[a("label",{attrs:{for:"password"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{placeholder:"密码",name:"password",id:"password",type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isRegister,expression:"isRegister"}]},[a("label",{attrs:{for:"captchaCode"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.captchaCode,expression:"captchaCode"}],attrs:{placeholder:"验证码",name:"password",id:"captchaCode",type:"text"},domProps:{value:e.captchaCode},on:{input:function(t){t.target.composing||(e.captchaCode=t.target.value)}}}),e._v(" "),a("label",{attrs:{for:"ResisterEmail"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ResisterEmail,expression:"ResisterEmail"}],attrs:{placeholder:"邮箱",name:"ResisterEmail",id:"ResisterEmail",type:"text"},domProps:{value:e.ResisterEmail},on:{input:function(t){t.target.composing||(e.ResisterEmail=t.target.value)}}})])])],1),e._v(" "),a("div",{staticClass:"loginFoot"},[a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isRegister,expression:"isRegister"}],attrs:{align:"center"}},[a("img",{attrs:{src:this.captchaCodeImg,alt:"img is wrong"},on:{click:e.getCaptchaCode}}),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!0===e.isRegister,expression:"isRegister === true"}],staticClass:"defaultButton",on:{click:e.accountRegister}},[e._v("注册")])])]),e._v(" "),a("div",{attrs:{align:"center"}},[a("button",{directives:[{name:"show",rawName:"v-show",value:!1===e.isRegister,expression:"isRegister === false"}],staticClass:"defaultButton",on:{click:e.accountLogin}},[e._v("登录")])]),e._v(" "),a("div",{attrs:{id:"loginOrRegister"}},[a("div",{staticClass:"loginOrRegister",on:{click:e.loginOrRegister}},[e._v(e._s(e.isRegister?"去登录":"去注册"))]),e._v(" "),a("div",{attrs:{id:"resetPassword"},on:{click:e.resetPassword}},[e._v("重置密码")])]),e._v(" "),a("alert",{directives:[{name:"show",rawName:"v-show",value:e.hasAlert,expression:"hasAlert"}],attrs:{"alert-text":e.alertText},on:{closeAlert:e.closeAlert}}),e._v(" "),a("login-change",{directives:[{name:"show",rawName:"v-show",value:e.hasChange,expression:"hasChange"}],on:{cancelChange:e.cancelChange}})],1)])},staticRenderFns:[]};var f=a("VU/8")(h,g,!1,function(e){a("sdSS")},"data-v-7094f75c",null);t.default=f.exports},sdSS:function(e,t){}});
//# sourceMappingURL=5.0ce527265b237d17521a.js.map