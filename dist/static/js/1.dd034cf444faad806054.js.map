{"version":3,"sources":["webpack:///./static/search.svg","webpack:///./static/selectImg.png","webpack:///src/components/model.vue","webpack:///./src/components/model.vue?8dd3","webpack:///./src/components/model.vue","webpack:///src/pages/index/view/makePoint.vue","webpack:///./src/pages/index/view/makePoint.vue?20e7","webpack:///./src/pages/index/view/makePoint.vue","webpack:///./static/geolocation.svg","webpack:///./static/create.svg","webpack:///src/components/PointInfo.vue","webpack:///./src/components/PointInfo.vue?8bb5","webpack:///./src/components/PointInfo.vue"],"names":["module","exports","model","name","components","alertTip","props","lat","lng","data","topic","content","hasAlert","alertText","info","files","index","maxLength","maxSize","methods","selectImg","_this","this","fileList","$refs","file","length","_loop","i","len","fileItem","id","size","reader","FileReader","onloadend","e","getBase64","target","result","then","url","$set","readAsDataURL","push","splice","Img","Image","dataURL","src","promise_default","a","resolve","reject","onload","canvas","document","createElement","width","height","ratio","newHeight","newWidth","getContext","drawImage","toDataURL","close","$emit","closeAlert","confirm","_this2","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","next","api","sendPoint","sent","tip","response","message","stop","components_model","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","for","_v","directives","rawName","value","expression","type","domProps","on","input","$event","composing","placeholder","alt","__webpack_require__","ref","multiple","accept","change","_l","key","align","click","alert-text","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","makePoint","PointInfo","AlertTip","alert_tip","Model","map","hasModel","point_lng","point_lat","hasPointMessage","pointInfo","markerName","pointId","search","searchAC","searchButton","mounted","BMap","Map","centerAndZoom","Point","enableScrollWheelZoom","changeRoute","Autocomplete","searchText","location","baseDom","searchBox","LocalSearch","renderOptions","autoPoint","geolocationByh5","extends_default","Object","vuex_esm","removeEventListener","showInfo","point","showPosition","position","coords","latitude","longitude","pointBak","Convertor","translate","res","points","marker","Marker","addOverlay","panTo","alert","showError","error","geolocationByIp","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","clearOverlays","navigator","geolocation","getCurrentPosition","enableHighAcuracy","timeout","maximumAge","Geolocation","r","mk","enableHighAccuracy","$store","state","hasLogin","addEventListener","startSearch","clearResults","blur","hide","deletePoint","_this3","removeOverlay","getOnePoint","_this4","_callee2","_context2","_this5","_callee3","pointPosition","_context3","getAllPoint","disableMassClear","view_makePoint","closePointMessage","_e","watcher","editTopic","editContent","edit","changeWatcher","sendNewPoint","components_PointInfo","_s"],"mappings":"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","file":"static/js/1.dd034cf444faad806054.js","sourcesContent":["module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNS4zNTQgMzUuMzU0Ij4NCiAgPGRlZnM+DQogICAgPHN0eWxlPg0KICAgICAgLmNscy0xLCAuY2xzLTQgew0KICAgICAgICBmaWxsOiBub25lOw0KICAgICAgfQ0KDQogICAgICAuY2xzLTEsIC5jbHMtMiB7DQogICAgICAgIHN0cm9rZTogIzcwNzA3MDsNCiAgICAgIH0NCg0KICAgICAgLmNscy0yIHsNCiAgICAgICAgZmlsbDogI2ZmZjsNCiAgICAgIH0NCg0KICAgICAgLmNscy0zIHsNCiAgICAgICAgc3Ryb2tlOiBub25lOw0KICAgICAgfQ0KICAgIDwvc3R5bGU+DQogIDwvZGVmcz4NCiAgPGcgaWQ9Iue7hF81OSIgZGF0YS1uYW1lPSLnu4QgNTkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNiAtMTAxKSI+DQogICAgPGxpbmUgaWQ9IuebtOe6v18yIiBkYXRhLW5hbWU9IuebtOe6vyAyIiBjbGFzcz0iY2xzLTEiIHgyPSIxMCIgeTI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MSAxMjYpIi8+DQogICAgPGcgaWQ9IuakreWchl8xIiBkYXRhLW5hbWU9IuakreWchiAxIiBjbGFzcz0iY2xzLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2IDEwMSkiPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTMiIGN4PSIxNi4yNSIgY3k9IjE2LjI1IiByPSIxNi4yNSIvPg0KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTQiIGN4PSIxNi4yNSIgY3k9IjE2LjI1IiByPSIxNS43NSIvPg0KICAgIDwvZz4NCiAgPC9nPg0KPC9zdmc+DQo=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/search.svg\n// module id = 6RCB\n// module chunks = 1","module.exports = \"data:image/png;base64,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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/selectImg.png\n// module id = 9Jd5\n// module chunks = 1 2","<template>\n  <transition name=\"fade\">\n    <div class=\"fullScream\">\n      <div class=\"model\">\n        <div class=\"modelCenter\">\n          <div>\n            <label for=\"topic\">名称</label>\n            <input name=\"topic\" id=\"topic\" type=\"text\" v-model=\"topic\"/>\n          </div>\n          <hr/>\n          <div>\n            <label for=\"content\"></label>\n            <textarea placeholder=\"输入文字...\" name=\"content\" id=\"content\" type=\"text\" v-model=\"content\"></textarea>\n          </div>\n          <div class=\"selectImg\">\n            <img alt=\"选择图片\" src=\"../../static/selectImg.png\">\n            <input type=\"file\" @change=\"selectImg()\" multiple accept=\"image/*\" ref=\"file\">\n          </div>\n          <div class=\"previewImg\">\n            <div v-for=\"(file) in files\" :key=\"file.id\">\n              <img :src=\"file.src\" alt=\"预览图\">\n            </div>\n          </div>\n        </div>\n        <div align=\"center\" class=\"modelFoot\">\n          <button class=\"confirm\" @click=\"confirm\">确认</button>\n          <button class=\"close\" @click=\"close\">关闭</button>\n        </div>\n      </div>\n      <alertTip v-show=\"hasAlert\" :alert-text=\"alertText\" @closeAlert=\"closeAlert\"></alertTip>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport API from '../api/api'\nimport alertTip from './alert_tip'\n\nexport default {\n  name: 'model',\n\n  components: {alertTip},\n\n  props: {\n    lat: '',\n    lng: ''\n  },\n\n  data () {\n    return {\n      topic: '',\n      content: '',\n      hasAlert: false,\n      alertText: '',\n      info: '',\n      files: [], // 文件缓存\n      index: 0, // 序列号\n      maxLength: 9, // 图片最大数量\n      maxSize: 10240000 // 图片限制为10M内\n    }\n  },\n\n  methods: {\n    selectImg () {\n      let fileList = this.$refs.file.files\n      if (fileList.length > 9) {\n        this.hasAlert = true\n        this.alertText = '最多同时上传9张图片'\n        return 0\n      }\n      for (let i = 0, len = fileList.length; i < len; i++) {\n        let fileItem = {\n          id: this.index++,\n          name: fileList[i].name,\n          size: fileList[i].size,\n          file: fileList[i]\n        }\n        // 将图片文件转成Base64\n        let reader = new FileReader()\n        reader.onloadend = e => {\n          this.getBase64(e.target.result).then(url => {\n            this.$set(fileItem, 'src', url)\n          })\n        }\n        if (fileItem.size > this.maxSize) {\n          this.hasAlert = true\n          this.alertText = '文件大小不能超过10MB'\n        } else {\n          reader.readAsDataURL(fileList[i])\n          this.files.push(fileItem)\n        }\n      }\n      this.files.splice(9)\n    },\n\n    getBase64 (url) {\n      let Img = new Image()\n      let dataURL = ''\n      Img.src = url\n      let p = new Promise(function (resolve, reject) {\n        Img.onload = function () {\n          // 要先确保图片完整获取到，这是个异步事件\n          let canvas = document.createElement('canvas') // 创建canvas元素\n          let width = Img.width // 确保canvas的尺寸和图片一样\n          let height = Img.height\n          // 默认将长宽设置为图片的原始长宽，这样在长宽不超过最大长度时就不需要再处理\n          let ratio = width / height\n          let maxLength = 100\n          let newHeight = height\n          let newWidth = width\n          // 在长宽超过最大长度时，按图片长宽比例等比缩小\n          if (width > maxLength || height > maxLength) {\n            if (width > height) {\n              newWidth = maxLength\n              newHeight = maxLength / ratio\n            } else {\n              newWidth = maxLength * ratio\n              newHeight = maxLength\n            }\n          }\n          canvas.width = newWidth\n          canvas.height = newHeight\n          canvas.getContext('2d').drawImage(Img, 0, 0, newWidth, newHeight) // 将图片绘制到canvas中\n          dataURL = canvas.toDataURL('image/jpeg', 0.5) // 转换图片为dataURL\n          resolve(dataURL)\n        }\n      })\n      return p\n    },\n\n    close () {\n      this.$emit('close')\n      this.files = []\n    },\n\n    closeAlert () {\n      this.hasAlert = false\n    },\n\n    async confirm () {\n      let data = {\n        topic: this.topic,\n        content: this.content,\n        lat: this.lat,\n        lng: this.lng,\n        url: this.files.src\n      }\n      let info = await API.sendPoint(data)\n      if (info.tip) {\n        this.hasAlert = true\n        this.alertText = info.tip\n      } else if (info.data.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = info.data.response.message\n      } else if (info.data.response.message === '成功') {\n        this.files = []\n      }\n      this.$emit('makePoint')\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .fullScream {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    z-index: 11;\n    left: 0;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n\n  .selectImg {\n    width: 80px;\n    height: 80px;\n    position: relative;\n  }\n\n  .selectImg img {\n    width: 80px;\n    height: 80px;\n  }\n\n  .selectImg input {\n    width: 80px;\n    height: 80px;\n    opacity: 0;\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n\n  .previewImg div{\n    height: 33%;\n    width: 33%;\n    display: inline-block;\n  }\n\n  .previewImg div img {\n    border-radius: 15px;\n  }\n\n  .modelCenter {\n    width: 90%;\n    height: 85%;\n    margin: 0 auto;\n  }\n\n  input, textarea {\n    width: 75%;\n    outline: none;\n    border: none;\n  }\n\n  #topic {\n    margin-top: 10px;\n    height: 40px;\n  }\n\n  #content {\n    height: 100px;\n    width: 100%;\n  }\n\n  .close {\n    width: 50px;\n    height: 50px;\n    border-radius: 25px;\n    border: none;\n    margin: 10px;\n    outline: none;\n  }\n\n  .confirm {\n    width: 50px;\n    height: 50px;\n    border-radius: 25px;\n    border: none;\n    margin: 10px;\n    outline: none;\n    background-color: rgb(255,179,0);\n  }\n\n  .model {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: white;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/model.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"fullScream\"},[_c('div',{staticClass:\"model\"},[_c('div',{staticClass:\"modelCenter\"},[_c('div',[_c('label',{attrs:{\"for\":\"topic\"}},[_vm._v(\"名称\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.topic),expression:\"topic\"}],attrs:{\"name\":\"topic\",\"id\":\"topic\",\"type\":\"text\"},domProps:{\"value\":(_vm.topic)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.topic=$event.target.value}}})]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',[_c('label',{attrs:{\"for\":\"content\"}}),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],attrs:{\"placeholder\":\"输入文字...\",\"name\":\"content\",\"id\":\"content\",\"type\":\"text\"},domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"selectImg\"},[_c('img',{attrs:{\"alt\":\"选择图片\",\"src\":require(\"../../static/selectImg.png\")}}),_vm._v(\" \"),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"multiple\":\"\",\"accept\":\"image/*\"},on:{\"change\":function($event){return _vm.selectImg()}}})]),_vm._v(\" \"),_c('div',{staticClass:\"previewImg\"},_vm._l((_vm.files),function(file){return _c('div',{key:file.id},[_c('img',{attrs:{\"src\":file.src,\"alt\":\"预览图\"}})])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"modelFoot\",attrs:{\"align\":\"center\"}},[_c('button',{staticClass:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(\"确认\")]),_vm._v(\" \"),_c('button',{staticClass:\"close\",on:{\"click\":_vm.close}},[_vm._v(\"关闭\")])])]),_vm._v(\" \"),_c('alertTip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasAlert),expression:\"hasAlert\"}],attrs:{\"alert-text\":_vm.alertText},on:{\"closeAlert\":_vm.closeAlert}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a0bee746\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/model.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a0bee746\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./model.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./model.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./model.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a0bee746\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./model.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a0bee746\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/model.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"makePoint\">\n    <div id=\"map\"></div>\n    <div class=\"search\" ref=\"searchBox\">\n      <div>\n        <img alt=\"search\" src=\"../../../../static/search.svg\">\n        <label for=\"search\"></label>\n        <input placeholder=\"搜地点\" name=\"search\" id=\"search\" type=\"text\" ref=\"searchText\" v-model=\"search\"/>\n        <button @click=\"startSearch\">搜索</button>\n      </div>\n    </div>\n    <div class=\"makePointButton\">\n      <button id=\"makePoint\" @click=\"sendPoint\">\n        <span>创建标注</span>\n        <img id=\"create\" src=\"../../../../static/create.svg\" alt=\"创建\"/>\n      </button>\n      <button id=\"geolocation\" @click=\"geolocationByh5\">\n        <span>当前位置</span>\n        <img id=\"geolocationImg\" src=\"../../../../static/geolocation.svg\" alt=\"定位\"/>\n      </button>\n    </div>\n    <model @close=\"close\" v-show=\"hasModel\" :lat=\"point_lat\" :lng=\"point_lng\" @makePoint=\"makePoint\"></model>\n    <AlertTip :alert-text=\"alertText\" @closeAlert=\"close\" v-show=\"hasAlert\"></AlertTip>\n    <pointInfo :pointInfo=\"pointInfo\" v-if=\"hasPointMessage\" @closePointMessage=\"close\" @deletePoint=\"deletePoint\"></pointInfo>\n  </div>\n</template>\n\n<script>\nimport Model from '../../../components/model'\nimport API from '../../../api/api'\nimport AlertTip from '../../../components/alert_tip'\nimport PointInfo from '../../../components/PointInfo'\nimport { mapActions } from 'vuex'\n\nexport default {\n  name: 'makePoint',\n\n  components: {PointInfo, AlertTip, Model},\n\n  data () {\n    return {\n      map: '',\n      hasModel: false,\n      point_lng: '',\n      point_lat: '',\n      hasAlert: '',\n      alertText: '',\n      hasPointMessage: false,\n      pointInfo: '',\n      markerName: '',\n      pointId: '',\n      search: '',\n      searchAC: '',\n      searchButton: ''\n    }\n  },\n\n  mounted () {\n    // eslint-disable-next-line no-undef\n    this.map = new BMap.Map('map')\n    // eslint-disable-next-line no-undef\n    this.map.centerAndZoom(new BMap.Point(116.404, 39.915), 11)\n    this.map.enableScrollWheelZoom(true)\n    this.changeRoute('makePoint')\n    // eslint-disable-next-line no-undef\n    this.searchAC = new BMap.Autocomplete({\n      'input': this.$refs.searchText,\n      'location': this.map,\n      'baseDom': this.$refs.searchBox\n    })\n    // eslint-disable-next-line no-undef\n    this.searchButton = new BMap.LocalSearch(this.map, {renderOptions: {map: this.map}})\n    this.autoPoint()\n    this.geolocationByh5()\n  },\n\n  methods: {\n    ...mapActions(['changeRoute']),\n\n    close () {\n      this.hasModel = false\n      this.hasAlert = false\n      this.hasPointMessage = false\n      this.map.removeEventListener('click', this.showInfo)\n    },\n\n    showInfo (e) {\n      this.hasModel = true\n      this.point_lng = e.point.lng\n      this.point_lat = e.point.lat\n    },\n\n    showPosition (position) {\n      let lat = position.coords.latitude\n      let lng = position.coords.longitude\n      // eslint-disable-next-line no-undef\n      const pointBak = new BMap.Point(lng, lat)\n      // eslint-disable-next-line no-undef\n      const convertor = new BMap.Convertor()\n      convertor.translate([pointBak], 1, 5, (res) => {\n        lng = res.points[0].lng\n        lat = res.points[0].lat\n        // eslint-disable-next-line no-undef\n        const point = new BMap.Point(lng, lat)\n        // eslint-disable-next-line no-undef\n        let marker = new BMap.Marker(point)\n        this.map.addOverlay(marker)\n        this.map.panTo(point)\n        alert('Latitude: ' + lat + 'Longitude: ' + lng)\n      })\n    },\n\n    showError (error) {\n      this.geolocationByIp()\n      switch (error.code) {\n        case error.PERMISSION_DENIED:\n          this.hasAlert = true\n          this.alertText = '定位失败,用户拒绝请求地理定位'\n          break\n        case error.POSITION_UNAVAILABLE:\n          this.hasAlert = true\n          this.alertText = '定位失败,位置信息不可用'\n          break\n        case error.TIMEOUT:\n          this.hasAlert = true\n          this.alertText = '定位失败,请求获取用户位置超时'\n          break\n        case error.UNKNOWN_ERROR:\n          this.hasAlert = true\n          this.alertText = '定位失败,定位系统失效'\n          break\n      }\n    },\n\n    geolocationByh5 () {\n      this.map.clearOverlays() // 清除已经定位过的点\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(this.showPosition, this.showError, {\n          enableHighAcuracy: true, // 指示浏览器获取高精度的位置，默认为false\n          timeout: 5000, // 指定获取地理位置的超时时间，默认不限时，单位为毫秒\n          maximumAge: 2000 // 最长有效期，在重复获取地理位置时，此参数指定多久再次获取位置。\n        })\n      } else {\n        this.geolocationByIp()\n      }\n    },\n\n    geolocationByIp () {\n      // eslint-disable-next-line no-undef\n      let geolocation = new BMap.Geolocation()\n      geolocation.getCurrentPosition((r) => {\n        // eslint-disable-next-line no-undef\n        let mk = new BMap.Marker(r.point)\n        this.map.addOverlay(mk)\n        this.map.panTo(r.point)\n      }, {enableHighAccuracy: true})\n    },\n\n    sendPoint () {\n      if (this.$store.state.hasLogin) {\n        this.map.addEventListener('click', this.showInfo)\n      } else {\n        this.hasAlert = true\n        this.alertText = '请先登录'\n      }\n    },\n\n    makePoint () {\n      this.hasModel = false\n      this.autoPoint()\n      this.map.removeEventListener('click', this.showInfo)\n    },\n\n    startSearch () {\n      this.searchButton.clearResults()\n      // 失去焦点收起手机上的键盘\n      this.$refs.searchText.blur()\n      // 隐藏autocomplete\n      this.searchAC.hide()\n      this.search = this.$refs.searchText.value\n      this.searchButton.search(this.search)\n    },\n\n    async deletePoint () {\n      let response = await API.deletePoint(this.pointId)\n      if (response.tip) {\n        this.hasAlert = true\n        this.alertText = response.tip\n      } else if (response.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = response.response.message\n      } else if (response.response.message === '成功') {\n        this.map.removeOverlay(this.markerName)\n      }\n    },\n\n    async getOnePoint (markerName) {\n      this.pointInfo = await API.getOnePoint(markerName)\n      if (this.pointInfo.tip) {\n        this.hasAlert = true\n        this.alertText = this.pointInfo.tip\n      } else if (this.pointInfo.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = this.pointInfo.response.message\n      }\n      this.hasPointMessage = true\n    },\n\n    async autoPoint () {\n      let pointPosition = await API.getAllPoint()\n      if (pointPosition.tip) {\n        this.hasAlert = true\n        this.alertText = pointPosition.tip\n      } else if (pointPosition.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = pointPosition.response.message\n      }\n      for (let i = 0; i < pointPosition.data.length; i++) {\n        let markerName = pointPosition.data[i]['id']\n        // eslint-disable-next-line no-undef\n        markerName = new BMap.Marker(new BMap.Point(pointPosition.data[i]['lng'], pointPosition.data[i]['lat']))\n        markerName.disableMassClear()\n        this.map.addOverlay(markerName)\n        markerName.addEventListener('click', () => {\n          this.getOnePoint(pointPosition.data[i]['id'])\n          this.pointId = pointPosition.data[i]['id']\n          this.markerName = markerName\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n  .makePoint {\n    height: 100%;\n  }\n\n  .makePointButton {\n    position: absolute;\n    right: 0;\n    top: 50%;\n    z-index: 10;\n    box-shadow: -1px 0 20px 7px rgba(0,0,0,0.16);\n    transform:translate(0, -50%);\n    border-radius: 15px;\n    width: 70px;\n  }\n\n  .search {\n    width: 90%;\n    height: 40px;\n    background-color: white;\n    border-radius: 15px;\n    position: absolute;\n    transform:translate(-50%, 0);\n    box-shadow: 0 6px 20px 3px rgba(0,0,0,0.16);\n    top: 100px;\n    left: 50%;\n  }\n\n  .search div {\n    width: 100%;\n    height: 40px;\n    border-radius: 15px;\n    position: relative;\n  }\n\n  .search div button {\n    width: 60px;\n    height: 40px;\n    border-radius: 15px;\n    outline: none;\n    background-color: rgb(255,179,0);\n    position: absolute;\n    border: none;\n    right: 0;\n  }\n\n  input {\n    width: 70%;\n    padding-left: 5px;\n    border: white;\n    outline: none;\n    border-radius: 15px;\n    position: absolute;\n    -webkit-transform: translate(-50%, 0);\n    transform: translate(-50%, -50%);\n    top: 50%;\n    left: 50%;\n  }\n\n  #makePoint, #geolocation {\n    height: 70px;\n    width: 70px;\n    background-color: rgb(255,255,255);\n    border: none;\n    padding: 0;\n    outline: none;\n    float: right;\n  }\n\n  #makePoint {\n    border-top-left-radius: 15px;\n    border-top-right-radius: 15px;\n  }\n\n  #geolocation {\n    border-bottom-left-radius: 15px;\n    border-bottom-right-radius: 15px;\n  }\n\n  .search img {\n    height: 17px;\n    width: 17px;\n    position: relative;\n    z-index: 11;\n    transform: translate(0, -50%);\n    top: 50%;\n    left: 15px;\n  }\n\n  #create {\n    height: 32px;\n    width: 23px;\n    position: relative;\n    bottom: 18px;\n  }\n\n  #geolocationImg {\n    height: 32px;\n    width: 32px;\n    position: relative;\n    bottom: 18px;\n  }\n\n  span {\n    position: relative;\n    top: 40px;\n  }\n\n  #map {\n    height: 100%;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/index/view/makePoint.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"makePoint\"},[_c('div',{attrs:{\"id\":\"map\"}}),_vm._v(\" \"),_c('div',{ref:\"searchBox\",staticClass:\"search\"},[_c('div',[_c('img',{attrs:{\"alt\":\"search\",\"src\":require(\"../../../../static/search.svg\")}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"search\"}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],ref:\"searchText\",attrs:{\"placeholder\":\"搜地点\",\"name\":\"search\",\"id\":\"search\",\"type\":\"text\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.startSearch}},[_vm._v(\"搜索\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"makePointButton\"},[_c('button',{attrs:{\"id\":\"makePoint\"},on:{\"click\":_vm.sendPoint}},[_c('span',[_vm._v(\"创建标注\")]),_vm._v(\" \"),_c('img',{attrs:{\"id\":\"create\",\"src\":require(\"../../../../static/create.svg\"),\"alt\":\"创建\"}})]),_vm._v(\" \"),_c('button',{attrs:{\"id\":\"geolocation\"},on:{\"click\":_vm.geolocationByh5}},[_c('span',[_vm._v(\"当前位置\")]),_vm._v(\" \"),_c('img',{attrs:{\"id\":\"geolocationImg\",\"src\":require(\"../../../../static/geolocation.svg\"),\"alt\":\"定位\"}})])]),_vm._v(\" \"),_c('model',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasModel),expression:\"hasModel\"}],attrs:{\"lat\":_vm.point_lat,\"lng\":_vm.point_lng},on:{\"close\":_vm.close,\"makePoint\":_vm.makePoint}}),_vm._v(\" \"),_c('AlertTip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasAlert),expression:\"hasAlert\"}],attrs:{\"alert-text\":_vm.alertText},on:{\"closeAlert\":_vm.close}}),_vm._v(\" \"),(_vm.hasPointMessage)?_c('pointInfo',{attrs:{\"pointInfo\":_vm.pointInfo},on:{\"closePointMessage\":_vm.close,\"deletePoint\":_vm.deletePoint}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-badd2b16\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/index/view/makePoint.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-badd2b16\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./makePoint.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./makePoint.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./makePoint.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-badd2b16\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./makePoint.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-badd2b16\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/index/view/makePoint.vue\n// module id = null\n// module chunks = ","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNSAzNSI+DQogIDxkZWZzPg0KICAgIDxzdHlsZT4NCiAgICAgIC5jbHMtMSB7DQogICAgICAgIGZpbGw6ICM3MDcwNzA7DQogICAgICB9DQogICAgPC9zdHlsZT4NCiAgPC9kZWZzPg0KICA8cGF0aCBpZD0i5a6a5L2NIiBjbGFzcz0iY2xzLTEiIGQ9Ik04MC44NjksNzkuNzc5YTEuOTQ0LDEuOTQ0LDAsMSwwLDEuOTQ1LDEuOTQ0QTEuOTQ3LDEuOTQ3LDAsMCwwLDgwLjg2OSw3OS43NzlabTE2LjQxLjg2NEg5NS43NDdhMTQuOSwxNC45LDAsMCwwLTEzLjgtMTMuNzg5VjY1LjNhMS4wODEsMS4wODEsMCwwLDAtMi4xNjEsMHYxLjU1MWExNC45LDE0LjksMCwwLDAtMTMuOCwxMy43ODlINjQuNDQxYTEuMDgsMS4wOCwwLDEsMCwwLDIuMTYxaDEuNTUyYTE0LjksMTQuOSwwLDAsMCwxMy44LDEzLjc4OXYxLjU1MWExLjA4MSwxLjA4MSwwLDAsMCwyLjE2MSwwVjk2LjU5MkExNC45LDE0LjksMCwwLDAsOTUuNzQ2LDgyLjhoMS41MzNhMS4wOCwxLjA4LDAsMSwwLDAtMi4xNjFaTTg4LjYzMSw4Mi44aDQuOTQ2QTEyLjc3NywxMi43NzcsMCwwLDEsODEuOTUsOTQuNDI0Vjg5LjVhMS4wODEsMS4wODEsMCwwLDAtMi4xNjEsMHY0LjkyM0ExMi43NzYsMTIuNzc2LDAsMCwxLDY4LjE2MSw4Mi44aDQuOTI2YTEuMDgsMS4wOCwwLDEsMCwwLTIuMTYxSDY4LjE2MUExMi43NzYsMTIuNzc2LDAsMCwxLDc5Ljc4OSw2OS4wMjJ2NC45MjNhMS4wODEsMS4wODEsMCwwLDAsMi4xNjEsMFY2OS4wMjJBMTIuNzc2LDEyLjc3NiwwLDAsMSw5My41NzgsODAuNjQzSDg4LjYzMWExLjA4LDEuMDgsMCwxLDAsMCwyLjE2MVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02My4zNiAtNjQuMjIzKSIvPg0KPC9zdmc+DQo=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/geolocation.svg\n// module id = k5fa\n// module chunks = 1","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMyAzMiI+DQogIDxkZWZzPg0KICAgIDxzdHlsZT4NCiAgICAgIC5jbHMtMSwgLmNscy0yIHsNCiAgICAgICAgZmlsbDogI2ZmZjsNCiAgICAgIH0NCg0KICAgICAgLmNscy0yIHsNCiAgICAgICAgc3Ryb2tlOiAjNzA3MDcwOw0KICAgICAgICBzdHJva2Utd2lkdGg6IDJweDsNCiAgICAgIH0NCg0KICAgICAgLmNscy0zLCAuY2xzLTQgew0KICAgICAgICBzdHJva2U6IG5vbmU7DQogICAgICB9DQoNCiAgICAgIC5jbHMtNCB7DQogICAgICAgIGZpbGw6ICM3MDcwNzA7DQogICAgICB9DQoNCiAgICAgIC5jbHMtNSB7DQogICAgICAgIGZpbGw6IG5vbmU7DQogICAgICB9DQogICAgPC9zdHlsZT4NCiAgPC9kZWZzPg0KICA8ZyBpZD0i57uEXzY5IiBkYXRhLW5hbWU9Iue7hCA2OSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM3MCAtMjA3KSI+DQogICAgPGcgaWQ9Iue7hF83MCIgZGF0YS1uYW1lPSLnu4QgNzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMyIC05KSI+DQogICAgICA8ZyBpZD0i6Lev5b6EXzYyIiBkYXRhLW5hbWU9Iui3r+W+hCA2MiIgY2xhc3M9ImNscy0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMzggMjE2KSI+DQogICAgICAgIDxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTSAxMS41IDMwLjM5NzU2OTY1NjM3MjA3IEMgMTAuNDU2NTE4MTczMjE3NzcgMjkuMDcwNzAzNTA2NDY5NzMgOC41MDQ3MTAxOTc0NDg3MyAyNi41MTk3NzUzOTA2MjUgNi41NzI1OTk4ODc4NDc5IDIzLjYyNzYzOTc3MDUwNzgxIEMgMi45MjY5NzAwMDUwMzU0IDE4LjE3MDU3OTkxMDI3ODMyIDEgMTQuMDA4NTY5NzE3NDA3MjMgMSAxMS41OTE1ODAzOTA5MzAxOCBDIDEgNS43NTEzNTk5Mzk1NzUxOTUgNS43MTAyNzk5NDE1NTg4MzggMSAxMS41IDEgQyAxNy4yODk3MjA1MzUyNzgzMiAxIDIyIDUuNzUxMzU5OTM5NTc1MTk1IDIyIDExLjU5MTU4MDM5MDkzMDE4IEMgMjIgMTQuMDA4NTY5NzE3NDA3MjMgMjAuMDczMDMwNDcxODAxNzYgMTguMTcwNTc5OTEwMjc4MzIgMTYuNDI3NDAwNTg4OTg5MjYgMjMuNjI3NjM5NzcwNTA3ODEgQyAxNC40OTUyODk4MDI1NTEyNyAyNi41MTk3NzUzOTA2MjUgMTIuNTQzNDgxODI2NzgyMjMgMjkuMDcwNzAzNTA2NDY5NzMgMTEuNSAzMC4zOTc1Njk2NTYzNzIwNyBaIi8+DQogICAgICAgIDxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTSAxMS41IDIgQyA2LjI2MTY4MDYwMzAyNzM0NCAyIDIgNi4zMDI3NTkxNzA1MzIyMjcgMiAxMS41OTE1Nzk0MzcyNTU4NiBDIDIgMTIuODU2OTI5Nzc5MDUyNzMgMi43MDA5MzkxNzg0NjY3OTcgMTYuMDI5MzE5NzYzMTgzNTkgNy4zOTUzNTk5OTI5ODA5NTcgMjMuMDU5MDIwOTk2MDkzNzUgQyA4Ljg5OTQ1Njk3Nzg0NDIzOCAyNS4zMTEzNTE3NzYxMjMwNSAxMC40MTY4NTU4MTIwNzI3NSAyNy4zNTYxNjQ5MzIyNTA5OCAxMS40OTk5OTkwNDYzMjU2OCAyOC43Njc0MDA3NDE1NzcxNSBDIDEyLjU4MzE2NjEyMjQzNjUyIDI3LjM1NjEzNjMyMjAyMTQ4IDE0LjEwMDU0MzAyMjE1NTc2IDI1LjMxMTM1MTc3NjEyMzA1IDE1LjYwNDY0MDAwNzAxOTA0IDIzLjA1OTAyMDk5NjA5Mzc1IEMgMjAuMjk5MDYwODIxNTMzMiAxNi4wMjkzMTk3NjMxODM1OSAyMSAxMi44NTY5Mjk3NzkwNTI3MyAyMSAxMS41OTE1Nzk0MzcyNTU4NiBDIDIxIDYuMzAyNzU5MTcwNTMyMjI3IDE2LjczODMxOTM5Njk3MjY2IDIgMTEuNSAyIE0gMTEuNSAwIEMgMTcuODUxMjcwNjc1NjU5MTggMCAyMyA1LjE4OTcyOTY5MDU1MTc1OCAyMyAxMS41OTE1Nzk0MzcyNTU4NiBDIDIzIDE3Ljk5MzQzMTA5MTMwODU5IDExLjUgMzIgMTEuNSAzMiBDIDExLjUgMzIgMCAxNy45OTM0MzEwOTEzMDg1OSAwIDExLjU5MTU3OTQzNzI1NTg2IEMgMCA1LjE4OTcyOTY5MDU1MTc1OCA1LjE0ODcyOTMyNDM0MDgyIDAgMTEuNSAwIFoiLz4NCiAgICAgIDwvZz4NCiAgICAgIDxnIGlkPSLmpK3lnIZfMiIgZGF0YS1uYW1lPSLmpK3lnIYgMiIgY2xhc3M9ImNscy0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNDQgMjIzKSI+DQogICAgICAgIDxjaXJjbGUgY2xhc3M9ImNscy0zIiBjeD0iNS41IiBjeT0iNS41IiByPSI1LjUiLz4NCiAgICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTUiIGN4PSI1LjUiIGN5PSI1LjUiIHI9IjQuNSIvPg0KICAgICAgPC9nPg0KICAgIDwvZz4NCiAgPC9nPg0KPC9zdmc+DQo=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/create.svg\n// module id = kP0s\n// module chunks = 1","<template>\r\n  <div class='fullScream'>\r\n    <div class='model'>\r\n      <div v-show=\"watcher\">\r\n        <div class=\"topic\">{{pointInfo.data.topic}}</div>\r\n        <div class=\"content\">{{pointInfo.data.content}}</div>\r\n      </div>\r\n      <div v-show=\"watcher === false\">\r\n        <div>\r\n          <label for=\"topic\">标题</label>\r\n          <input name=\"topic\" id=\"topic\" type=\"text\" v-model=\"editTopic\"/>\r\n        </div>\r\n        <div>\r\n          <label for=\"content\">内容</label>\r\n          <input name=\"content\" id=\"content\" type=\"text\" v-model=\"editContent\"/>\r\n        </div>\r\n      </div>\r\n      <button v-show=\"watcher\" @click=\"close\">关闭</button>\r\n      <button v-show=\"watcher\" @click=\"edit\">编辑</button>\r\n      <button v-show=\"watcher === false\" @click=\"sendNewPoint\">确定</button>\r\n      <button v-show=\"watcher === false\" @click=\"changeWatcher\">取消</button>\r\n      <button v-show=\"watcher\" @click=\"deletePoint\">删除</button>\r\n    </div>\r\n    <alertTip v-show=\"hasAlert\" :alert-text=\"alertText\" @closeAlert=\"closeAlert\"></alertTip>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../api/api'\r\nimport alertTip from './alert_tip'\r\n\r\nexport default {\r\n  name: 'PointInfo',\r\n  components: {alertTip},\r\n  data () {\r\n    return {\r\n      watcher: true,\r\n      editTopic: this.pointInfo.data.topic,\r\n      editContent: this.pointInfo.data.content,\r\n      hasAlert: '',\r\n      alertText: ''\r\n    }\r\n  },\r\n\r\n  props: {\r\n    pointInfo: {\r\n      type: Object\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    closeAlert () {\r\n      this.hasAlert = false\r\n    },\r\n\r\n    close () {\r\n      this.$emit('closePointMessage')\r\n    },\r\n\r\n    edit () {\r\n      this.watcher = false\r\n    },\r\n\r\n    changeWatcher () {\r\n      this.watcher = true\r\n    },\r\n\r\n    deletePoint () {\r\n      this.$emit('deletePoint')\r\n      this.close()\r\n    },\r\n\r\n    async sendNewPoint () {\r\n      let data = {\r\n        topic: this.editTopic,\r\n        content: this.editContent\r\n      }\r\n      let response = await API.sendNewPoint(data)\r\n      if (response.tip) {\r\n        this.hasAlert = true\r\n        this.alertText = response.tip\r\n      } else if (response.response.message !== '成功') {\r\n        this.hasAlert = true\r\n        this.alertText = response.response.message\r\n      } else if (response.response.message === '成功') {\r\n        this.$emit('closePointMessage')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .fullScream {\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n  }\r\n\r\n  .model {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    width: 30%;\r\n    height: 40%;\r\n    transform:translate(-50%, -50%);\r\n    background-color: white;\r\n  }\r\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PointInfo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fullScream\"},[_c('div',{staticClass:\"model\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}]},[_c('div',{staticClass:\"topic\"},[_vm._v(_vm._s(_vm.pointInfo.data.topic))]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.pointInfo.data.content))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher === false),expression:\"watcher === false\"}]},[_c('div',[_c('label',{attrs:{\"for\":\"topic\"}},[_vm._v(\"标题\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editTopic),expression:\"editTopic\"}],attrs:{\"name\":\"topic\",\"id\":\"topic\",\"type\":\"text\"},domProps:{\"value\":(_vm.editTopic)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.editTopic=$event.target.value}}})]),_vm._v(\" \"),_c('div',[_c('label',{attrs:{\"for\":\"content\"}},[_vm._v(\"内容\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editContent),expression:\"editContent\"}],attrs:{\"name\":\"content\",\"id\":\"content\",\"type\":\"text\"},domProps:{\"value\":(_vm.editContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.editContent=$event.target.value}}})])]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}],on:{\"click\":_vm.close}},[_vm._v(\"关闭\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}],on:{\"click\":_vm.edit}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher === false),expression:\"watcher === false\"}],on:{\"click\":_vm.sendNewPoint}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher === false),expression:\"watcher === false\"}],on:{\"click\":_vm.changeWatcher}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}],on:{\"click\":_vm.deletePoint}},[_vm._v(\"删除\")])]),_vm._v(\" \"),_c('alertTip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasAlert),expression:\"hasAlert\"}],attrs:{\"alert-text\":_vm.alertText},on:{\"closeAlert\":_vm.closeAlert}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4208f2fc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PointInfo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4208f2fc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PointInfo.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PointInfo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PointInfo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4208f2fc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PointInfo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4208f2fc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PointInfo.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}