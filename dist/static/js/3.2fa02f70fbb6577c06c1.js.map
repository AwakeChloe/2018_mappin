{"version":3,"sources":["webpack:///src/components/model.vue","webpack:///./src/components/model.vue?d4f7","webpack:///./src/components/model.vue","webpack:///src/components/PointInfo.vue","webpack:///./src/components/PointInfo.vue?8bb5","webpack:///./src/components/PointInfo.vue","webpack:///src/pages/index/view/makePoint.vue","webpack:///./src/pages/index/view/makePoint.vue?2921","webpack:///./src/pages/index/view/makePoint.vue"],"names":["model","name","props","lat","lng","data","topic","content","hasAlert","alertText","info","methods","selectImgs","reader","FileReader","file","this","$refs","files","imgUrlBase64","readAsDataURL","console","log","onload","e","result","length","alert","close","$emit","confirm","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","api","sendPoint","sent","tip","response","message","stop","components_model","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","for","_v","directives","rawName","value","expression","id","type","domProps","on","input","$event","target","composing","placeholder","ref","multiple","accept","change","align","click","staticRenderFns","src_components_model","__webpack_require__","normalizeComponent","ssrContext","PointInfo","components","alertTip","alert_tip","watcher","editTopic","pointInfo","editContent","Object","closeAlert","edit","changeWatcher","deletePoint","sendNewPoint","components_PointInfo","_s","alert-text","makePoint","PointInfo_normalizeComponent","AlertTip","Model","map","hasModel","point_lng","point_lat","hasPointMessage","markerName","pointId","mounted","BMap","Map","centerAndZoom","Point","enableScrollWheelZoom","removeEventListener","showInfo","point","$store","state","hasLogin","addEventListener","autoPoint","removeOverlay","getOnePoint","_this2","_callee2","_context2","_this3","_callee3","pointPosition","_loop","i","_context3","getAllPoint","Marker","addOverlay","view_makePoint","closePointMessage","_e","makePoint_Component","makePoint_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/3.2fa02f70fbb6577c06c1.js","sourcesContent":["<template>\n  <div class=\"fullScream\">\n    <div class=\"model\">\n      <div class=\"modelCenter\">\n        <div>\n          <label for=\"topic\">名称</label>\n          <input name=\"topic\" id=\"topic\" type=\"text\" v-model=\"topic\"/>\n        </div>\n        <hr/>\n        <div>\n          <label for=\"content\"></label>\n          <textarea placeholder=\"输入文字...\" name=\"content\" id=\"content\" type=\"text\" v-model=\"content\"></textarea>\n        </div>\n        <input type=\"file\" @change=\"selectImgs()\" multiple accept=\"image/*\" ref=\"file\">\n      </div>\n      <div align=\"center\" class=\"modelFoot\">\n        <button class=\"close\" @click=\"confirm\">确认</button>\n        <button class=\"close\" @click=\"close\">关闭</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport API from '../api/api'\n\nexport default {\n  name: 'model',\n\n  props: {\n    lat: '',\n    lng: ''\n  },\n\n  data () {\n    return {\n      topic: '',\n      content: '',\n      hasAlert: false,\n      alertText: '',\n      info: ''\n    }\n  },\n\n  methods: {\n    selectImgs () {\n      let reader = new FileReader()\n      let AllowImgFileSize = 2100000 // 上传图片最大值(单位字节)（ 2 M = 2097152 B ）超过2M上传失败\n      let file = this.$refs.file.files\n      if (file) {\n        // 将文件以Data URL形式读入页面\n        let imgUrlBase64 = reader.readAsDataURL(file)\n        console.log(imgUrlBase64)\n        reader.onload = function (e) {\n          // var ImgFileSize = reader.result.substring(reader.result.indexOf(\",\") + 1).length;//截取base64码部分（可选可不选，需要与后台沟通）\n          if (AllowImgFileSize !== 0 && AllowImgFileSize < reader.result.length) {\n            alert('上传失败，请上传不大于2M的图片！')\n          } else {\n            // 执行上传操作\n            alert(reader.result)\n          }\n        }\n      }\n    },\n\n    close () {\n      this.$emit('close')\n    },\n\n    async confirm () {\n      let data = {\n        topic: this.topic,\n        content: this.content,\n        lat: this.lat,\n        lng: this.lng\n      }\n      let info = await API.sendPoint(data)\n      if (info.tip) {\n        this.hasAlert = true\n        this.alertText = info.tip\n      } else if (info.data.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = info.data.response.message\n      }\n      this.$emit('makePoint')\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .fullScream {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    left: 0;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n\n  .modelCenter {\n    width: 90%;\n    height: 60%;\n    margin: 0 auto;\n  }\n\n  input, textarea{\n    width: 75%;\n    outline: none;\n    border: none;\n  }\n\n  #topic {\n    margin-top: 10px;\n    height: 40px;\n  }\n\n  #content {\n    height: 100px;\n    width: 100%;\n  }\n\n  .close {\n    width: 50px;\n    height: 50px;\n    border-radius: 25px;\n    border: none;\n    margin: 30px;\n    outline: none;\n  }\n\n  .model {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 50%;\n    height: 50%;\n    transform:translate(-50%, -50%);\n    background-color: white;\n    border-radius: 10px;\n    padding: 10px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/model.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fullScream\"},[_c('div',{staticClass:\"model\"},[_c('div',{staticClass:\"modelCenter\"},[_c('div',[_c('label',{attrs:{\"for\":\"topic\"}},[_vm._v(\"名称\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.topic),expression:\"topic\"}],attrs:{\"name\":\"topic\",\"id\":\"topic\",\"type\":\"text\"},domProps:{\"value\":(_vm.topic)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.topic=$event.target.value}}})]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',[_c('label',{attrs:{\"for\":\"content\"}}),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],attrs:{\"placeholder\":\"输入文字...\",\"name\":\"content\",\"id\":\"content\",\"type\":\"text\"},domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})]),_vm._v(\" \"),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"multiple\":\"\",\"accept\":\"image/*\"},on:{\"change\":function($event){return _vm.selectImgs()}}})]),_vm._v(\" \"),_c('div',{staticClass:\"modelFoot\",attrs:{\"align\":\"center\"}},[_c('button',{staticClass:\"close\",on:{\"click\":_vm.confirm}},[_vm._v(\"确认\")]),_vm._v(\" \"),_c('button',{staticClass:\"close\",on:{\"click\":_vm.close}},[_vm._v(\"关闭\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b73a8676\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/model.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b73a8676\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./model.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./model.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./model.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b73a8676\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./model.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b73a8676\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/model.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class='fullScream'>\r\n    <div class='model'>\r\n      <div v-show=\"watcher\">\r\n        <div class=\"topic\">{{pointInfo.data.topic}}</div>\r\n        <div class=\"content\">{{pointInfo.data.content}}</div>\r\n      </div>\r\n      <div v-show=\"watcher === false\">\r\n        <div>\r\n          <label for=\"topic\">标题</label>\r\n          <input name=\"topic\" id=\"topic\" type=\"text\" v-model=\"editTopic\"/>\r\n        </div>\r\n        <div>\r\n          <label for=\"content\">内容</label>\r\n          <input name=\"content\" id=\"content\" type=\"text\" v-model=\"editContent\"/>\r\n        </div>\r\n      </div>\r\n      <button v-show=\"watcher\" @click=\"close\">关闭</button>\r\n      <button v-show=\"watcher\" @click=\"edit\">编辑</button>\r\n      <button v-show=\"watcher === false\" @click=\"sendNewPoint\">确定</button>\r\n      <button v-show=\"watcher === false\" @click=\"changeWatcher\">取消</button>\r\n      <button v-show=\"watcher\" @click=\"deletePoint\">删除</button>\r\n    </div>\r\n    <alertTip v-show=\"hasAlert\" :alert-text=\"alertText\" @closeAlert=\"closeAlert\"></alertTip>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../api/api'\r\nimport alertTip from './alert_tip'\r\n\r\nexport default {\r\n  name: 'PointInfo',\r\n  components: {alertTip},\r\n  data () {\r\n    return {\r\n      watcher: true,\r\n      editTopic: this.pointInfo.data.topic,\r\n      editContent: this.pointInfo.data.content,\r\n      hasAlert: '',\r\n      alertText: ''\r\n    }\r\n  },\r\n\r\n  props: {\r\n    pointInfo: {\r\n      type: Object\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    closeAlert () {\r\n      this.hasAlert = false\r\n    },\r\n\r\n    close () {\r\n      this.$emit('closePointMessage')\r\n    },\r\n\r\n    edit () {\r\n      this.watcher = false\r\n    },\r\n\r\n    changeWatcher () {\r\n      this.watcher = true\r\n    },\r\n\r\n    deletePoint () {\r\n      this.$emit('deletePoint')\r\n      this.close()\r\n    },\r\n\r\n    async sendNewPoint () {\r\n      let data = {\r\n        topic: this.editTopic,\r\n        content: this.editContent\r\n      }\r\n      let response = await API.sendNewPoint(data)\r\n      if (response.tip) {\r\n        this.hasAlert = true\r\n        this.alertText = response.tip\r\n      } else if (response.response.message !== '成功') {\r\n        this.hasAlert = true\r\n        this.alertText = response.response.message\r\n      } else if (response.response.message === '成功') {\r\n        this.$emit('closePointMessage')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .fullScream {\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n  }\r\n\r\n  .model {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    width: 30%;\r\n    height: 40%;\r\n    transform:translate(-50%, -50%);\r\n    background-color: white;\r\n  }\r\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PointInfo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fullScream\"},[_c('div',{staticClass:\"model\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}]},[_c('div',{staticClass:\"topic\"},[_vm._v(_vm._s(_vm.pointInfo.data.topic))]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.pointInfo.data.content))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher === false),expression:\"watcher === false\"}]},[_c('div',[_c('label',{attrs:{\"for\":\"topic\"}},[_vm._v(\"标题\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editTopic),expression:\"editTopic\"}],attrs:{\"name\":\"topic\",\"id\":\"topic\",\"type\":\"text\"},domProps:{\"value\":(_vm.editTopic)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.editTopic=$event.target.value}}})]),_vm._v(\" \"),_c('div',[_c('label',{attrs:{\"for\":\"content\"}},[_vm._v(\"内容\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editContent),expression:\"editContent\"}],attrs:{\"name\":\"content\",\"id\":\"content\",\"type\":\"text\"},domProps:{\"value\":(_vm.editContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.editContent=$event.target.value}}})])]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}],on:{\"click\":_vm.close}},[_vm._v(\"关闭\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}],on:{\"click\":_vm.edit}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher === false),expression:\"watcher === false\"}],on:{\"click\":_vm.sendNewPoint}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher === false),expression:\"watcher === false\"}],on:{\"click\":_vm.changeWatcher}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}],on:{\"click\":_vm.deletePoint}},[_vm._v(\"删除\")])]),_vm._v(\" \"),_c('alertTip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasAlert),expression:\"hasAlert\"}],attrs:{\"alert-text\":_vm.alertText},on:{\"closeAlert\":_vm.closeAlert}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4208f2fc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PointInfo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4208f2fc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PointInfo.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PointInfo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PointInfo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4208f2fc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PointInfo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4208f2fc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PointInfo.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"makePoint\">\n    <div id=\"map\"></div>\n    <div class=\"makePointButton\">\n      <button id=\"makePoint\" @click=\"sendPoint\">创建标注</button>\n    </div>\n    <model @close=\"close\" v-show=\"hasModel\" :lat=\"point_lat\" :lng=\"point_lng\" @makePoint=\"makePoint\"></model>\n    <AlertTip :alert-text=\"alertText\" @closeAlert=\"close\" v-show=\"hasAlert\"></AlertTip>\n    <pointInfo :pointInfo=\"pointInfo\" v-if=\"hasPointMessage\" @closePointMessage=\"close\" @deletePoint=\"deletePoint\"></pointInfo>\n  </div>\n</template>\n\n<script>\nimport Model from '../../../components/model'\nimport API from '../../../api/api'\nimport AlertTip from '../../../components/alert_tip'\nimport PointInfo from '../../../components/PointInfo'\n\nexport default {\n  name: 'makePoint',\n\n  components: {PointInfo, AlertTip, Model},\n\n  data () {\n    return {\n      map: '',\n      hasModel: false,\n      point_lng: '',\n      point_lat: '',\n      hasAlert: '',\n      alertText: '',\n      hasPointMessage: false,\n      pointInfo: '',\n      markerName: '',\n      pointId: ''\n    }\n  },\n\n  mounted () {\n    // eslint-disable-next-line no-undef\n    this.map = new BMap.Map('map')\n    // eslint-disable-next-line no-undef\n    this.map.centerAndZoom(new BMap.Point(116.404, 39.915), 11)\n    this.map.enableScrollWheelZoom(true)\n  },\n\n  methods: {\n    close () {\n      this.hasModel = false\n      this.hasAlert = false\n      this.hasPointMessage = false\n      this.map.removeEventListener('click', this.showInfo)\n    },\n\n    showInfo (e) {\n      this.hasModel = true\n      this.point_lng = e.point.lng\n      this.point_lat = e.point.lat\n    },\n\n    sendPoint () {\n      if (this.$store.state.hasLogin) {\n        this.map.addEventListener('click', this.showInfo)\n      } else {\n        this.hasAlert = true\n        this.alertText = '请先登录'\n      }\n    },\n\n    makePoint () {\n      this.hasModel = false\n      this.autoPoint()\n      this.map.removeEventListener('click', this.showInfo)\n    },\n\n    async deletePoint () {\n      let response = await API.deletePoint(this.pointId)\n      if (response.tip) {\n        this.hasAlert = true\n        this.alertText = response.tip\n      } else if (response.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = response.response.message\n      } else if (response.response.message === '成功') {\n        this.map.removeOverlay(this.markerName)\n      }\n    },\n\n    async getOnePoint (markerName) {\n      this.pointInfo = await API.getOnePoint(markerName)\n      if (this.pointInfo.tip) {\n        this.hasAlert = true\n        this.alertText = this.pointInfo.tip\n      } else if (this.pointInfo.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = this.pointInfo.response.message\n      }\n      this.hasPointMessage = true\n    },\n\n    async autoPoint () {\n      let pointPosition = await API.getAllPoint()\n      if (pointPosition.tip) {\n        this.hasAlert = true\n        this.alertText = pointPosition.tip\n      } else if (pointPosition.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = pointPosition.response.message\n      }\n      for (let i = 0; i < pointPosition.data.length; i++) {\n        let markerName = pointPosition.data[i]['id']\n        // eslint-disable-next-line no-undef\n        markerName = new BMap.Marker(new BMap.Point(pointPosition.data[i]['lng'], pointPosition.data[i]['lat']))\n        this.map.addOverlay(markerName)\n        markerName.addEventListener('click', () => {\n          this.getOnePoint(pointPosition.data[i]['id'])\n          this.pointId = pointPosition.data[i]['id']\n          this.markerName = markerName\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n  .makePoint {\n    height: 100%;\n  }\n\n  .makePointButton {\n    position: absolute;\n    right: 0;\n    top: 50%;\n    z-index: 10;\n    transform:translate(0, -50%);\n  }\n\n  #makePoint {\n    height: 70px;\n    width: 70px;\n    border-radius: 15px;\n    background-color: gray;\n    border: none;\n    padding: 0;\n    outline: none;\n  }\n\n  #map {\n    height: 100%;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/index/view/makePoint.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"makePoint\"},[_c('div',{attrs:{\"id\":\"map\"}}),_vm._v(\" \"),_c('div',{staticClass:\"makePointButton\"},[_c('button',{attrs:{\"id\":\"makePoint\"},on:{\"click\":_vm.sendPoint}},[_vm._v(\"创建标注\")])]),_vm._v(\" \"),_c('model',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasModel),expression:\"hasModel\"}],attrs:{\"lat\":_vm.point_lat,\"lng\":_vm.point_lng},on:{\"close\":_vm.close,\"makePoint\":_vm.makePoint}}),_vm._v(\" \"),_c('AlertTip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasAlert),expression:\"hasAlert\"}],attrs:{\"alert-text\":_vm.alertText},on:{\"closeAlert\":_vm.close}}),_vm._v(\" \"),(_vm.hasPointMessage)?_c('pointInfo',{attrs:{\"pointInfo\":_vm.pointInfo},on:{\"closePointMessage\":_vm.close,\"deletePoint\":_vm.deletePoint}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51aba71c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/index/view/makePoint.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-51aba71c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./makePoint.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./makePoint.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./makePoint.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51aba71c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./makePoint.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-51aba71c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/index/view/makePoint.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}