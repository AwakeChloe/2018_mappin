{"version":3,"sources":["webpack:///src/components/model.vue","webpack:///./src/components/model.vue?0709","webpack:///./src/components/model.vue","webpack:///src/components/PointInfo.vue","webpack:///./src/components/PointInfo.vue?8bb5","webpack:///./src/components/PointInfo.vue","webpack:///src/pages/index/view/makePoint.vue","webpack:///./src/pages/index/view/makePoint.vue?98b8","webpack:///./src/pages/index/view/makePoint.vue"],"names":["model","name","props","lat","lng","data","topic","content","hasAlert","alertText","info","methods","selectImgs","reader","FileReader","file","this","$refs","files","imgUrlBase64","readAsDataURL","console","log","onload","e","result","length","alert","close","$emit","confirm","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","api","sendPoint","sent","tip","response","message","stop","components_model","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","for","_v","directives","rawName","value","expression","id","type","domProps","on","input","$event","target","composing","ref","multiple","accept","change","click","staticRenderFns","src_components_model","__webpack_require__","normalizeComponent","ssrContext","PointInfo","components","alertTip","alert_tip","watcher","editTopic","pointInfo","editContent","Object","closeAlert","edit","changeWatcher","deletePoint","sendNewPoint","components_PointInfo","_s","alert-text","makePoint","PointInfo_normalizeComponent","AlertTip","Model","map","hasModel","point_lng","point_lat","hasPointMessage","markerName","pointId","mounted","BMap","Map","centerAndZoom","Point","enableScrollWheelZoom","removeEventListener","showInfo","point","addEventListener","autoPoint","removeOverlay","getOnePoint","_this2","_callee2","_context2","_this3","_callee3","pointPosition","_loop","i","_context3","getAllPoint","Marker","addOverlay","view_makePoint","closePointMessage","_e","makePoint_Component","makePoint_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/1.a9dcb6c3a58ecf6ce5ff.js","sourcesContent":["<template>\r\n  <div class=\"fullScream\">\r\n    <div class=\"model\">\r\n      <div class=\"modelContain\">\r\n        <div>\r\n          <label for=\"topic\">标题:</label>\r\n          <input name=\"topic\" id=\"topic\" type=\"text\" v-model=\"topic\"/>\r\n        </div>\r\n        <div>\r\n          <label for=\"content\">内容:</label>\r\n          <input name=\"content\" id=\"content\" type=\"text\" v-model=\"content\"/>\r\n        </div>\r\n        <input type=\"file\" @change=\"selectImgs()\" multiple accept=\"image/*\" ref=\"file\">\r\n      </div>\r\n      <div class=\"modelFoot\">\r\n        <button @click=\"confirm\">确认</button>\r\n        <button @click=\"close\">关闭</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../api/api'\r\n\r\nexport default {\r\n  name: 'model',\r\n\r\n  props: {\r\n    lat: '',\r\n    lng: ''\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      topic: '',\r\n      content: '',\r\n      hasAlert: false,\r\n      alertText: '',\r\n      info: ''\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    selectImgs () {\r\n      let reader = new FileReader()\r\n      let AllowImgFileSize = 2100000 // 上传图片最大值(单位字节)（ 2 M = 2097152 B ）超过2M上传失败\r\n      let file = this.$refs.file.files\r\n      if (file) {\r\n        // 将文件以Data URL形式读入页面\r\n        let imgUrlBase64 = reader.readAsDataURL(file)\r\n        console.log(imgUrlBase64)\r\n        reader.onload = function (e) {\r\n          // var ImgFileSize = reader.result.substring(reader.result.indexOf(\",\") + 1).length;//截取base64码部分（可选可不选，需要与后台沟通）\r\n          if (AllowImgFileSize !== 0 && AllowImgFileSize < reader.result.length) {\r\n            alert('上传失败，请上传不大于2M的图片！')\n          } else {\r\n            // 执行上传操作\r\n            alert(reader.result)\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    close () {\r\n      this.$emit('close')\r\n    },\r\n\r\n    async confirm () {\r\n      let data = {\r\n        topic: this.topic,\r\n        content: this.content,\r\n        lat: this.lat,\r\n        lng: this.lng\r\n      }\r\n      let info = await API.sendPoint(data)\r\n      if (info.tip) {\r\n        this.hasAlert = true\r\n        this.alertText = info.tip\r\n      } else if (info.data.response.message !== '成功') {\r\n        this.hasAlert = true\r\n        this.alertText = info.data.response.message\r\n      }\r\n      this.$emit('makePoint')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .fullScream {\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n  }\r\n\r\n  .model {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    width: 30%;\r\n    height: 40%;\r\n    transform:translate(-50%, -50%);\r\n    background-color: white;\r\n  }\r\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/model.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fullScream\"},[_c('div',{staticClass:\"model\"},[_c('div',{staticClass:\"modelContain\"},[_c('div',[_c('label',{attrs:{\"for\":\"topic\"}},[_vm._v(\"标题:\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.topic),expression:\"topic\"}],attrs:{\"name\":\"topic\",\"id\":\"topic\",\"type\":\"text\"},domProps:{\"value\":(_vm.topic)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.topic=$event.target.value}}})]),_vm._v(\" \"),_c('div',[_c('label',{attrs:{\"for\":\"content\"}},[_vm._v(\"内容:\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],attrs:{\"name\":\"content\",\"id\":\"content\",\"type\":\"text\"},domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})]),_vm._v(\" \"),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"multiple\":\"\",\"accept\":\"image/*\"},on:{\"change\":function($event){return _vm.selectImgs()}}})]),_vm._v(\" \"),_c('div',{staticClass:\"modelFoot\"},[_c('button',{on:{\"click\":_vm.confirm}},[_vm._v(\"确认\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.close}},[_vm._v(\"关闭\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8f98a7d0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/model.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8f98a7d0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./model.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./model.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./model.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8f98a7d0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./model.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8f98a7d0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/model.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class='fullScream'>\r\n    <div class='model'>\r\n      <div v-show=\"watcher\">\r\n        <div class=\"topic\">{{pointInfo.data.topic}}</div>\r\n        <div class=\"content\">{{pointInfo.data.content}}</div>\r\n      </div>\r\n      <div v-show=\"watcher === false\">\r\n        <div>\r\n          <label for=\"topic\">标题</label>\r\n          <input name=\"topic\" id=\"topic\" type=\"text\" v-model=\"editTopic\"/>\r\n        </div>\r\n        <div>\r\n          <label for=\"content\">内容</label>\r\n          <input name=\"content\" id=\"content\" type=\"text\" v-model=\"editContent\"/>\r\n        </div>\r\n      </div>\r\n      <button v-show=\"watcher\" @click=\"close\">关闭</button>\r\n      <button v-show=\"watcher\" @click=\"edit\">编辑</button>\r\n      <button v-show=\"watcher === false\" @click=\"sendNewPoint\">确定</button>\r\n      <button v-show=\"watcher === false\" @click=\"changeWatcher\">取消</button>\r\n      <button v-show=\"watcher\" @click=\"deletePoint\">删除</button>\r\n    </div>\r\n    <alertTip v-show=\"hasAlert\" :alert-text=\"alertText\" @closeAlert=\"closeAlert\"></alertTip>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../api/api'\r\nimport alertTip from './alert_tip'\r\n\r\nexport default {\r\n  name: 'PointInfo',\r\n  components: {alertTip},\r\n  data () {\r\n    return {\r\n      watcher: true,\r\n      editTopic: this.pointInfo.data.topic,\r\n      editContent: this.pointInfo.data.content,\r\n      hasAlert: '',\r\n      alertText: ''\r\n    }\r\n  },\r\n\r\n  props: {\r\n    pointInfo: {\r\n      type: Object\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    closeAlert () {\r\n      this.hasAlert = false\r\n    },\r\n\r\n    close () {\r\n      this.$emit('closePointMessage')\r\n    },\r\n\r\n    edit () {\r\n      this.watcher = false\r\n    },\r\n\r\n    changeWatcher () {\r\n      this.watcher = true\r\n    },\r\n\r\n    deletePoint () {\r\n      this.$emit('deletePoint')\r\n      this.close()\r\n    },\r\n\r\n    async sendNewPoint () {\r\n      let data = {\r\n        topic: this.editTopic,\r\n        content: this.editContent\r\n      }\r\n      let response = await API.sendNewPoint(data)\r\n      if (response.tip) {\r\n        this.hasAlert = true\r\n        this.alertText = response.tip\r\n      } else if (response.response.message !== '成功') {\r\n        this.hasAlert = true\r\n        this.alertText = response.response.message\r\n      } else if (response.response.message === '成功') {\r\n        this.$emit('closePointMessage')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .fullScream {\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n  }\r\n\r\n  .model {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    width: 30%;\r\n    height: 40%;\r\n    transform:translate(-50%, -50%);\r\n    background-color: white;\r\n  }\r\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/PointInfo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fullScream\"},[_c('div',{staticClass:\"model\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}]},[_c('div',{staticClass:\"topic\"},[_vm._v(_vm._s(_vm.pointInfo.data.topic))]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.pointInfo.data.content))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher === false),expression:\"watcher === false\"}]},[_c('div',[_c('label',{attrs:{\"for\":\"topic\"}},[_vm._v(\"标题\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editTopic),expression:\"editTopic\"}],attrs:{\"name\":\"topic\",\"id\":\"topic\",\"type\":\"text\"},domProps:{\"value\":(_vm.editTopic)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.editTopic=$event.target.value}}})]),_vm._v(\" \"),_c('div',[_c('label',{attrs:{\"for\":\"content\"}},[_vm._v(\"内容\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editContent),expression:\"editContent\"}],attrs:{\"name\":\"content\",\"id\":\"content\",\"type\":\"text\"},domProps:{\"value\":(_vm.editContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.editContent=$event.target.value}}})])]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}],on:{\"click\":_vm.close}},[_vm._v(\"关闭\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}],on:{\"click\":_vm.edit}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher === false),expression:\"watcher === false\"}],on:{\"click\":_vm.sendNewPoint}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher === false),expression:\"watcher === false\"}],on:{\"click\":_vm.changeWatcher}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.watcher),expression:\"watcher\"}],on:{\"click\":_vm.deletePoint}},[_vm._v(\"删除\")])]),_vm._v(\" \"),_c('alertTip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasAlert),expression:\"hasAlert\"}],attrs:{\"alert-text\":_vm.alertText},on:{\"closeAlert\":_vm.closeAlert}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4208f2fc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PointInfo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4208f2fc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PointInfo.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PointInfo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PointInfo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4208f2fc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PointInfo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4208f2fc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PointInfo.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"makePoint\">\n    <div id=\"map\"></div>\n    <div class=\"makePointButton\">\n      <button @click=\"sendPoint\">添加一个点</button>\n    </div>\n    <model @close=\"close\" v-show=\"hasModel\" :lat=\"point_lat\" :lng=\"point_lng\" @makePoint=\"makePoint\"></model>\n    <AlertTip :alert-text=\"alertText\" @closeAlert=\"close\" v-show=\"hasPointMessage\"></AlertTip>\n    <pointInfo :pointInfo=\"pointInfo\" v-if=\"hasPointMessage\" @closePointMessage=\"close\" @deletePoint=\"deletePoint\"></pointInfo>\n  </div>\n</template>\n\n<script>\nimport Model from '../../../components/model'\nimport API from '../../../api/api'\nimport AlertTip from '../../../components/alert_tip'\nimport PointInfo from '../../../components/PointInfo'\n\nexport default {\n  name: 'makePoint',\n\n  components: {PointInfo, AlertTip, Model},\n\n  data () {\n    return {\n      map: '',\n      hasModel: false,\n      point_lng: '',\n      point_lat: '',\n      hasAlert: '',\n      alertText: '',\n      hasPointMessage: false,\n      pointInfo: '',\n      markerName: '',\n      pointId: ''\n    }\n  },\n\n  mounted () {\n    // eslint-disable-next-line no-undef\n    this.map = new BMap.Map('map')\n    // eslint-disable-next-line no-undef\n    this.map.centerAndZoom(new BMap.Point(116.404, 39.915), 11)\n    this.map.enableScrollWheelZoom(true)\n  },\n\n  methods: {\n    close () {\n      this.hasModel = false\n      this.hasPointMessage = false\n      this.map.removeEventListener('click', this.showInfo)\n    },\n\n    showInfo (e) {\n      this.hasModel = true\n      this.point_lng = e.point.lng\n      this.point_lat = e.point.lat\n    },\n\n    sendPoint () {\n      this.map.addEventListener('click', this.showInfo)\n    },\n\n    makePoint () {\n      this.hasModel = false\n      this.autoPoint()\n      this.map.removeEventListener('click', this.showInfo)\n    },\n\n    async deletePoint () {\n      let response = await API.deletePoint(this.pointId)\n      if (response.tip) {\n        this.hasAlert = true\n        this.alertText = response.tip\n      } else if (response.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = response.response.message\n      } else if (response.response.message === '成功') {\n        this.map.removeOverlay(this.markerName)\n      }\n    },\n\n    async getOnePoint (markerName) {\n      this.pointInfo = await API.getOnePoint(markerName)\n      if (this.pointInfo.tip) {\n        this.hasAlert = true\n        this.alertText = this.pointInfo.tip\n      } else if (this.pointInfo.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = this.pointInfo.response.message\n      }\n      this.hasPointMessage = true\n    },\n\n    async autoPoint () {\n      let pointPosition = await API.getAllPoint()\n      if (pointPosition.tip) {\n        this.hasAlert = true\n        this.alertText = pointPosition.tip\n      } else if (pointPosition.response.message !== '成功') {\n        this.hasAlert = true\n        this.alertText = pointPosition.response.message\n      }\n      for (let i = 0; i < pointPosition.data.length; i++) {\n        let markerName = pointPosition.data[i]['id']\n        // eslint-disable-next-line no-undef\n        markerName = new BMap.Marker(new BMap.Point(pointPosition.data[i]['lng'], pointPosition.data[i]['lat']))\n        this.map.addOverlay(markerName)\n        markerName.addEventListener('click', () => {\n          this.getOnePoint(pointPosition.data[i]['id'])\n          this.pointId = pointPosition.data[i]['id']\n          this.markerName = markerName\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n  .makePoint {\n    height: 80%;\n  }\n\n  #map {\n    height: 100%;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/index/view/makePoint.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"makePoint\"},[_c('div',{attrs:{\"id\":\"map\"}}),_vm._v(\" \"),_c('div',{staticClass:\"makePointButton\"},[_c('button',{on:{\"click\":_vm.sendPoint}},[_vm._v(\"添加一个点\")])]),_vm._v(\" \"),_c('model',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasModel),expression:\"hasModel\"}],attrs:{\"lat\":_vm.point_lat,\"lng\":_vm.point_lng},on:{\"close\":_vm.close,\"makePoint\":_vm.makePoint}}),_vm._v(\" \"),_c('AlertTip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasPointMessage),expression:\"hasPointMessage\"}],attrs:{\"alert-text\":_vm.alertText},on:{\"closeAlert\":_vm.close}}),_vm._v(\" \"),(_vm.hasPointMessage)?_c('pointInfo',{attrs:{\"pointInfo\":_vm.pointInfo},on:{\"closePointMessage\":_vm.close,\"deletePoint\":_vm.deletePoint}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-11774928\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/index/view/makePoint.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-11774928\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./makePoint.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./makePoint.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./makePoint.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-11774928\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./makePoint.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-11774928\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/index/view/makePoint.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}